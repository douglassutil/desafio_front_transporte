<section class="container-dashboard">
    <div class="container-group">
        <h6>Vis√£o Geral de Entregas</h6>

        <div class="container-table" tabindex="0">
            @if (totalDataSource$ | async; as totalDataSource) {
                @if (totalDataSource.status == "success") {
                    <table mat-table [dataSource]="totalDataSource.dashboard">
                        <ng-container matColumnDef="Driver">
                            <th mat-header-cell *matHeaderCellDef> Motorista </th>
                            <td mat-cell *matCellDef="let element"> {{element.driver}} </td>
                        </ng-container>
            
                        <ng-container matColumnDef="TotalDelivery">
                            <th mat-header-cell *matHeaderCellDef> Total Entregas </th>
                            <td mat-cell *matCellDef="let element"> {{element.totalAmount}} </td>
                        </ng-container>
            
                        <ng-container matColumnDef="SuccessDelivery">
                            <th mat-header-cell *matHeaderCellDef> Entregas Realizadas </th>
                            <td mat-cell *matCellDef="let element"> {{element.successAmount}} </td>
                        </ng-container>
            
                        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                    </table>
                }
            }
        </div>
    </div>

    <div class="container-group">
        <h6>Entregas com Falha</h6>

        <div class="container-table" tabindex="1">    
            @if (failureDataSource$ | async; as failureDataSource) {
                @if (failureDataSource.status == "success") {
                    <table mat-table [dataSource]="failureDataSource.dashboard">
                        <ng-container matColumnDef="Driver">
                            <th mat-header-cell *matHeaderCellDef> Motorista </th>
                            <td mat-cell *matCellDef="let element"> {{element.driver}} </td>
                        </ng-container>
            
                        <ng-container matColumnDef="FailureDelivery">
                            <th mat-header-cell *matHeaderCellDef> Entregas Falhas </th>
                            <td mat-cell *matCellDef="let element"> {{element.failureAmount}} </td>
                        </ng-container>
            
                        <tr mat-header-row *matHeaderRowDef="displayedFailureColumns; sticky: true"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedFailureColumns;"></tr>
                    </table>
                }
            }
        </div>
    </div>

    <div class="container-group">
        <h6>Entregas por bairro</h6>

        <div class="container-table" tabindex="2">    
            @if (progressDataSource$ | async; as progressDataSource) {
                @if (progressDataSource.status == "success") {
                    <table mat-table [dataSource]="progressDataSource.dashboard">
                        <ng-container matColumnDef="Neighborhood">
                            <th mat-header-cell *matHeaderCellDef> Bairro </th>
                            <td mat-cell *matCellDef="let element"> {{element.neighborhood}} </td>
                        </ng-container>
            
                        <ng-container matColumnDef="TotalDelivery">
                            <th mat-header-cell *matHeaderCellDef> Total Entregas </th>
                            <td mat-cell *matCellDef="let element"> {{element.totalAmount}} </td>
                        </ng-container>
            
                        <ng-container matColumnDef="SuccessDelivery">
                            <th mat-header-cell *matHeaderCellDef> Entregas Realizadas </th>
                            <td mat-cell *matCellDef="let element"> {{element.successAmount}} </td>
                        </ng-container>
            
                        <tr mat-header-row *matHeaderRowDef="displayedProgressColumns; sticky: true"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedProgressColumns;"></tr>
                    </table>
                }
            }
        </div>
    </div>

</section>